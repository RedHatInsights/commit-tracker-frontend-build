"use strict";(self.webpackChunkcommit_tracker=self.webpackChunkcommit_tracker||[]).push([[167],{59910:(e,t,a)=>{a.r(t),a.d(t,{CommitPage:()=>S,default:()=>E});var n=a(15671),r=a(43144),l=a(97326),i=a(60136),c=a(6215),o=a(61120),s=a(4942),u=a(93264),m=a.n(u),p=a(73685),h=a(84669),f=a(63383),g=a(27577),d=a(45697),v=a.n(d);var S=function(e){(0,i.Z)(p,e);var t,a,u=(t=p,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,o.Z)(t);if(a){var r=(0,o.Z)(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return(0,c.Z)(this,e)});function p(e){var t;(0,n.Z)(this,p),t=u.call(this,e),(0,s.Z)((0,l.Z)(t),"setPage",(function(e,a){console.log("NEXT PAGE"),t.setState({page:a},(function(){t.updateUrl()}))})),(0,s.Z)((0,l.Z)(t),"setPageSize",(function(e,a){t.setState({pageSize:a},(function(){t.updateUrl()}))})),console.log(e.match);var a=new URLSearchParams(e.location.search),r=null===a.get("limit")?10:a.get("limit"),i=null===a.get("offset")?0:a.get("offset"),c=null===a.get("page")?1:a.get("page"),o=null===a.get("pageSize")?10:a.get("pageSize");return t.state={page:c,pageSize:o,data:{},columns:[],rows:{},stats:{},limit:r,offset:i,url:"",meta:{},app:e.match.params.app,commit:e.match.params.commit},t.params=new URLSearchParams(e.location.search),t}return(0,r.Z)(p,[{key:"grabResults",value:function(){var e=this;console.log(this.state.url),fetch(this.state.url).then((function(e){return e.json()})).then((function(t){return e.setState({data:t},(function(){var a=Object.keys(t.data[0]),n=[];t.data.forEach((function(e){var t=[];a.forEach((function(a){if("app"===a){var n="internal/commit-tracker/"+e[a];t.push({title:m().createElement("a",{href:n},e[a])})}else if("commit_hash"===a){var r="internal/commit-tracker/"+e.app+"/"+e[a];t.push({title:m().createElement("a",{href:r},e[a])})}else if("html_url"===a){var l=e.html_url;t.push({title:m().createElement("a",{href:l},e[a])})}else t.push(e[a])})),n.push(t)})),a=a.map((function(e){return e.replace("_"," ")})),e.setState({rows:n,columns:a,meta:t.meta})}))}))}},{key:"componentDidMount",value:function(){this.updateUrl()}},{key:"updateUrl",value:function(){var e=this,t="/api/commit-tracker/track/";void 0!==this.state.app&&(t+=this.state.app+"/"),void 0!==this.commit&&(t+=this.state.commit+"/"),t+="?offset="+(this.state.page-1)*this.state.pageSize,t+="&limit="+this.state.pageSize,t+="&reverse=true",this.setState({url:t},(function(){e.grabResults()}))}},{key:"render",value:function(){document.title="Commit Tracker";var e=this.state,t=e.app,a=e.commit,n=e.data,r=e.columns,l=e.rows,i=e.page,c=e.pageSize,o=e.meta;return m().createElement(m().Fragment,null,m().createElement(f.PageHeader,null,m().createElement(f.PageHeaderTitle,{title:t}),m().createElement("p",null," ",a," ")),m().createElement(f.Main,null,m().createElement(h.Stack,{hasGutter:!0},m().createElement(h.StackItem,null,m().createElement(h.Stack,{hasGutter:!0},m().createElement(h.StackItem,null,m().createElement(g.Table,{"aria-label":"Compact Table",variant:g.TableVariant.compact,cells:r,rows:l},m().createElement(g.TableHeader,null),m().createElement(g.TableBody,null)),m().createElement(h.Pagination,{widgetId:"pagination-options-menu-bottom",perPage:c,page:i,itemCount:o.count,dropDirection:"up",onSetPage:this.setPage,onPerPageSelect:this.setPageSize,style:{marginTop:"1rem"}}),m().createElement("pre",null,JSON.stringify(this.stats,null,2)),m().createElement("pre",{style:{visibility:"hidden"}},JSON.stringify(n,null,2))))))))}}]),p}(m().Component);(0,s.Z)(S,"propTypes",{location:v().object,history:v().object,eventEmitter:v().object,match:v().object});const E=(0,p.withRouter)(S)}}]);
//# sourceMappingURL=../sourcemaps/CommitPage.d3d08b228dbdb13748bf50670a897ec7.js.map