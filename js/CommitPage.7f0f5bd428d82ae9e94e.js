"use strict";(self.webpackChunkcommit_tracker=self.webpackChunkcommit_tracker||[]).push([[167],{9910:(t,e,a)=>{a.r(e),a.d(e,{CommitPage:()=>P,default:()=>R});var n=a(5671),r=a(3144),l=a(7326),i=a(136),c=a(6215),o=a(1120),s=a(4942),u=a(7294),m=a(5977),p=a(9739),f=a(3826),h=a(3607),g=a(8716),v=a(9173),E=a(6350),d=a(215),S=a(5863),y=a(6934),k=a(2860),Z=a(5697),b=a.n(Z);var P=function(t){(0,i.Z)(Z,t);var e,a,m=(e=Z,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,n=(0,o.Z)(e);if(a){var r=(0,o.Z)(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return(0,c.Z)(this,t)});function Z(t){var e;(0,n.Z)(this,Z),e=m.call(this,t),(0,s.Z)((0,l.Z)(e),"setPage",(function(t,a){console.log("NEXT PAGE"),e.setState({page:a},(function(){e.updateUrl()}))})),(0,s.Z)((0,l.Z)(e),"setPageSize",(function(t,a){e.setState({pageSize:a},(function(){e.updateUrl()}))})),console.log(t.match);var a=new URLSearchParams(t.location.search),r=null===a.get("limit")?10:a.get("limit"),i=null===a.get("offset")?0:a.get("offset"),c=null===a.get("page")?1:a.get("page"),o=null===a.get("pageSize")?10:a.get("pageSize");return e.state={page:c,pageSize:o,data:{},columns:[],rows:{},stats:{},limit:r,offset:i,url:"",meta:{},app:t.match.params.app,commit:t.match.params.commit},e.params=new URLSearchParams(t.location.search),e}return(0,r.Z)(Z,[{key:"grabResults",value:function(){var t=this;console.log(this.state.url),fetch(this.state.url).then((function(t){return t.json()})).then((function(e){return t.setState({data:e},(function(){var a=Object.keys(e.data[0]),n=[];e.data.forEach((function(t){var e=[];a.forEach((function(a){if("app"===a){var n="internal/commit-tracker/"+t[a];e.push({title:u.createElement("a",{href:n},t[a])})}else if("commit_hash"===a){var r="internal/commit-tracker/"+t.app+"/"+t[a];e.push({title:u.createElement("a",{href:r},t[a])})}else if("html_url"===a){var l=t.html_url;e.push({title:u.createElement("a",{href:l},t[a])})}else e.push(t[a])})),n.push(e)})),a=a.map((function(t){return t.replace("_"," ")})),t.setState({rows:n,columns:a,meta:e.meta})}))}))}},{key:"componentDidMount",value:function(){this.updateUrl()}},{key:"updateUrl",value:function(){var t=this,e="/api/commit-tracker/track/";void 0!==this.state.app&&(e+=this.state.app+"/"),void 0!==this.commit&&(e+=this.state.commit+"/"),e+="?offset="+(this.state.page-1)*this.state.pageSize,e+="&limit="+this.state.pageSize,e+="&reverse=true",this.setState({url:e},(function(){t.grabResults()}))}},{key:"render",value:function(){document.title="Commit Tracker";var t=this.state,e=t.app,a=t.commit,n=t.data,r=t.columns,l=t.rows,i=t.page,c=t.pageSize,o=t.meta;return u.createElement(u.Fragment,null,u.createElement(g.Z,null,u.createElement(v.Z,{title:e}),u.createElement("p",null," ",a," ")),u.createElement(E.Z,null,u.createElement(p.K,{hasGutter:!0},u.createElement(f.v,null,u.createElement(p.K,{hasGutter:!0},u.createElement(f.v,null,u.createElement(d.i,{"aria-label":"Compact Table",variant:S.B.compact,cells:r,rows:l},u.createElement(y.x,null),u.createElement(k.R,null)),u.createElement(h.t,{widgetId:"pagination-options-menu-bottom",perPage:c,page:i,itemCount:o.count,dropDirection:"up",onSetPage:this.setPage,onPerPageSelect:this.setPageSize,style:{marginTop:"1rem"}}),u.createElement("pre",null,JSON.stringify(this.stats,null,2)),u.createElement("pre",{style:{visibility:"hidden"}},JSON.stringify(n,null,2))))))))}}]),Z}(u.Component);(0,s.Z)(P,"propTypes",{location:b().object,history:b().object,eventEmitter:b().object,match:b().object});const R=(0,m.EN)(P)}}]);
//# sourceMappingURL=../sourcemaps/CommitPage.2da6e6ae22a433166932cfbc1a607830.js.map